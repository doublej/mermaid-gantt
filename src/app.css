@import "tailwindcss";

/* Custom theme configuration */
@theme {
	/* Fonts - Brand: DM Sans for display/body, DM Mono for code */
	--font-family-sans: "DM Sans", system-ui, sans-serif;
	--font-family-mono: "DM Mono", ui-monospace, monospace;
	--font-family-display: "DM Sans", system-ui, sans-serif;
	--font-family-body: "DM Sans", system-ui, sans-serif;
	--font-family-code: "DM Mono", ui-monospace, monospace;

	/* Typography */
	--letter-spacing-display: 0.02em;

	/* Layout */
	--spacing-row-height: 40px;
	--spacing-header-height: 48px;
	--spacing-sidebar-width: 200px;

	/* Border radius tokens */
	--radius-input: 2px;
	--radius-card: 4px;
	--radius-modal: 6px;

	/* Motion - Easing (from brand guidelines) */
	--ease-out: cubic-bezier(0, 0, 0.2, 1);
	--ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
	--ease-in: cubic-bezier(0.4, 0, 1, 1);

	/* Motion - Durations */
	--duration-micro: 100ms;
	--duration-fast: 150ms;
	--duration-base: 200ms;
	--duration-emphasis: 300ms;
	--duration-max: 500ms;
	--stagger-offset: 50ms;

	/* Light mode colors (default) - Brand Sky palette */
	--color-bg: #FAFAFA;
	--color-surface: #FFFFFF;
	--color-surface-elevated: #F5F5F5;
	--color-border: #E5E5E5;
	--color-border-emphasis: #D1D1D1;

	--color-text: #1A1A1A;
	--color-text-secondary: #6B6B6B;
	--color-text-tertiary: #9C9C9C;

	--color-accent: #0ea5e9;        /* Sky 500 - brand primary */
	--color-accent-hover: #0284c7;  /* Sky 600 - brand hover */
	--color-accent-light: #e0f2fe;  /* Sky 100 */
	--color-accent-subtle: #f0f9ff; /* Sky 50 */

	--color-status-done: #65A30D;
	--color-status-active: #0F766E;
	--color-status-critical: #DC2626;
	--color-status-milestone: #7C3AED;

	--color-weekend: #F0EFED;
	--color-grid: #E5E4E2;
	--color-grid-dark: #D1D0CE;
	--color-today: #EA580C;

	--color-focus-ring: #0F766E;

	/* Legacy compatibility (gantt-specific) */
	--color-gantt-primary: var(--color-accent);
	--color-gantt-primary-hover: var(--color-accent-hover);
	--color-gantt-active: var(--color-status-active);
	--color-gantt-done: var(--color-status-done);
	--color-gantt-crit: var(--color-status-critical);
	--color-gantt-milestone: var(--color-status-milestone);
	--color-gantt-grid: var(--color-grid);
	--color-gantt-grid-dark: var(--color-grid-dark);
	--color-gantt-section-bg: var(--color-surface-elevated);
	--color-gantt-focus-ring: var(--color-focus-ring);
}

/* Dark mode overrides - Brand Sky palette */
html.dark {
	--color-bg: #0D0D0D;
	--color-surface: #1A1A1A;
	--color-surface-elevated: #262626;
	--color-border: #2A2A2A;
	--color-border-emphasis: #404040;

	--color-text: #E5E5E5;
	--color-text-secondary: #8A8A8A;
	--color-text-tertiary: #666666;

	--color-accent: #38bdf8;        /* Sky 400 - brand dark mode */
	--color-accent-hover: #7dd3fc;  /* Sky 300 */
	--color-accent-light: #0c4a6e;  /* Sky 900 */
	--color-accent-subtle: #082f49; /* Sky 950 */

	--color-status-done: #4ADE80;
	--color-status-active: #60A5FA;
	--color-status-critical: #F87171;
	--color-status-milestone: #A78BFA;

	--color-weekend: #1A1A1A;
	--color-grid: #2A2A2A;
	--color-grid-dark: #404040;
	--color-today: #60A5FA;

	--color-focus-ring: #60A5FA;
}

/* Base styles */
@layer base {
	html {
		font-family: var(--font-family-sans);
		-webkit-font-smoothing: antialiased;
		-moz-osx-font-smoothing: grayscale;
		background-color: var(--color-bg);
		color: var(--color-text);
		transition: background-color 0.2s ease, color 0.2s ease;
	}

	body {
		background-color: var(--color-bg);
		color: var(--color-text);
	}

	/* Focus visible styles for keyboard navigation */
	:focus-visible {
		outline: none;
		box-shadow: 0 0 0 2px var(--color-bg), 0 0 0 4px var(--color-focus-ring);
	}

	/* Remove focus ring for mouse users */
	:focus:not(:focus-visible) {
		outline: none;
		box-shadow: none;
	}
}

/* Keyboard shortcut badges - MacBook-style keycaps */
@layer components {
	.kbd {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		min-width: 1.5rem;
		height: 1.5rem;
		padding-left: 0.375rem;
		padding-right: 0.375rem;
		font-size: 0.75rem;
		font-family: var(--font-family-mono);
		font-weight: 500;
		color: var(--color-text-secondary);
		/* 3D keycap effect */
		background: linear-gradient(
			to bottom,
			var(--color-surface-elevated) 0%,
			color-mix(in srgb, var(--color-surface-elevated) 92%, black) 100%
		);
		border: 1px solid var(--color-border);
		border-bottom-width: 2px;
		border-radius: 0.375rem;
		box-shadow:
			0 1px 0 var(--color-border),
			0 2px 3px rgba(0, 0, 0, 0.08),
			inset 0 1px 0 rgba(255, 255, 255, 0.1);
	}

	.kbd-sm {
		height: 1.25rem;
		padding-left: 0.25rem;
		padding-right: 0.25rem;
		font-size: 0.625rem;
	}

	/* Key width modifiers - MacBook proportions */
	.kbd-wide { min-width: 2.5rem; }      /* Shift */
	.kbd-medium { min-width: 2rem; }      /* Ctrl, Alt, Cmd, Tab, Esc */
	.kbd-narrow { min-width: 1.5rem; }    /* Letters, numbers, arrows */
	.kbd-space { min-width: 4rem; }       /* Space bar */

	/* Small variants */
	.kbd-sm.kbd-wide { min-width: 2rem; }
	.kbd-sm.kbd-medium { min-width: 1.6rem; }
	.kbd-sm.kbd-narrow { min-width: 1.25rem; }
	.kbd-sm.kbd-space { min-width: 3rem; }

	/* Button styles */
	.btn-primary {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.5rem 1rem;
		font-size: 0.875rem;
		font-weight: 500;
		color: white;
		background-color: var(--color-accent);
		border-radius: 0.5rem;
		transition: background-color 0.15s ease;
	}

	.btn-primary:hover {
		background-color: var(--color-accent-hover);
	}

	.btn-secondary {
		display: inline-flex;
		align-items: center;
		gap: 0.5rem;
		padding: 0.5rem 1rem;
		font-size: 0.875rem;
		font-weight: 500;
		color: var(--color-text);
		background-color: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 0.5rem;
		transition: background-color 0.15s ease, border-color 0.15s ease;
	}

	.btn-secondary:hover {
		background-color: var(--color-surface-elevated);
		border-color: var(--color-border-emphasis);
	}

	.btn-ghost {
		display: inline-flex;
		align-items: center;
		justify-content: center;
		padding: 0.5rem;
		color: var(--color-text-secondary);
		border-radius: 0.5rem;
		transition: background-color 0.15s ease, color 0.15s ease;
	}

	.btn-ghost:hover {
		background-color: var(--color-surface-elevated);
		color: var(--color-text);
	}

	.btn-ghost:disabled {
		opacity: 0.3;
		cursor: not-allowed;
	}

	/* Card/surface styles */
	.surface {
		background-color: var(--color-surface);
		border: 1px solid var(--color-border);
		border-radius: 0.75rem;
	}

	.surface-elevated {
		background-color: var(--color-surface-elevated);
	}

	/* Modal backdrop */
	.modal-backdrop {
		position: fixed;
		inset: 0;
		z-index: 50;
		background-color: rgba(0, 0, 0, 0.5);
	}

	html.dark .modal-backdrop {
		background-color: rgba(0, 0, 0, 0.7);
	}
}

/* Utility overrides for theme colors */
@layer utilities {
	.text-primary {
		color: var(--color-text);
	}

	.text-secondary {
		color: var(--color-text-secondary);
	}

	.text-tertiary {
		color: var(--color-text-tertiary);
	}

	.text-accent {
		color: var(--color-accent);
	}

	.bg-page {
		background-color: var(--color-bg);
	}

	.bg-surface {
		background-color: var(--color-surface);
	}

	.bg-surface-elevated {
		background-color: var(--color-surface-elevated);
	}

	.border-default {
		border-color: var(--color-border);
	}

	.border-emphasis {
		border-color: var(--color-border-emphasis);
	}
}

/* Reduced motion - accessibility */
@media (prefers-reduced-motion: reduce) {
	*,
	*::before,
	*::after {
		animation-duration: 0.01ms !important;
		animation-iteration-count: 1 !important;
		transition-duration: 0.01ms !important;
		scroll-behavior: auto !important;
	}
}
